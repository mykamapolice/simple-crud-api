(()=>{var e={738:(e,t,n)=>{const r=n(147),o=n(17),s=n(37);function a(e){console.log(`[dotenv][DEBUG] ${e}`)}const i=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,d=/\\n/g,c=/\r\n|\n|\r/;function u(e,t){const n=Boolean(t&&t.debug),r={};return e.toString().split(c).forEach((function(e,t){const o=e.match(i);if(null!=o){const e=o[1];let t=o[2]||"";const n=t.length-1,s='"'===t[0]&&'"'===t[n];"'"===t[0]&&"'"===t[n]||s?(t=t.substring(1,n),s&&(t=t.replace(d,"\n"))):t=t.trim(),r[e]=t}else n&&a(`did not match key and value when parsing line ${t+1}: ${e}`)})),r}e.exports.config=function(e){let t=o.resolve(process.cwd(),".env"),n="utf8",i=!1;var d;e&&(null!=e.path&&(t="~"===(d=e.path)[0]?o.join(s.homedir(),d.slice(1)):d),null!=e.encoding&&(n=e.encoding),null!=e.debug&&(i=!0));try{const e=u(r.readFileSync(t,{encoding:n}),{debug:i});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?i&&a(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=u},21:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NIL:()=>S,parse:()=>v,stringify:()=>l,v1:()=>h,v3:()=>m,v4:()=>b,v5:()=>P,validate:()=>c,version:()=>I});const r=require("crypto");var o=n.n(r);const s=new Uint8Array(256);let a=s.length;function i(){return a>s.length-16&&(o().randomFillSync(s),a=0),s.slice(a,a+=16)}const d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(e){return"string"==typeof e&&d.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const l=function(e,t=0){const n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};let f,p,y=0,g=0;const h=function(e,t,n){let r=t&&n||0;const o=t||new Array(16);let s=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:p;if(null==s||null==a){const t=e.random||(e.rng||i)();null==s&&(s=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=p=16383&(t[6]<<8|t[7]))}let d=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:g+1;const u=d-y+(c-g)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||d>y)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=d,g=c,p=a,d+=122192928e5;const h=(1e4*(268435455&d)+c)%4294967296;o[r++]=h>>>24&255,o[r++]=h>>>16&255,o[r++]=h>>>8&255,o[r++]=255&h;const v=d/4294967296*1e4&268435455;o[r++]=v>>>8&255,o[r++]=255&v,o[r++]=v>>>24&15|16,o[r++]=v>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(let e=0;e<6;++e)o[r+e]=s[e];return t||l(o)},v=function(e){if(!c(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function w(e,t,n){function r(e,r,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=v(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),a=n(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=a[e];return o}return l(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const m=w("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),b=function(e,t,n){const r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return l(r)},P=w("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",I=function(e){if(!c(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonSchema=t.fromString=t.empty=t.isUuid=t.regex=t.uuid=void 0;const r=n(837),o=n(21),s={v4:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,v5:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-5[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u};t.regex=s;const a={v4:{type:"string",pattern:s.v4.toString().slice(1,-2)},v5:{type:"string",pattern:s.v5.toString().slice(1,-2)}};t.jsonSchema=a;const i=r.deprecate((()=>o.v4()),"uuidv4() is deprecated. Use v4() from the uuid module instead.");t.uuid=i;const d=r.deprecate((e=>o.validate(e)&&(4===o.version(e)||5===o.version(e))),"isUuid() is deprecated. Use validate() from the uuid module instead.");t.isUuid=d;const c=r.deprecate((()=>o.NIL),"empty() is deprecated. Use NIL from the uuid module instead.");t.empty=c;const u=r.deprecate(((e,t="bb5d0ffa-9a4c-4d7c-8fc2-0a7d2220ba45")=>o.v5(e,t)),"fromString() is deprecated. Use v5() from the uuid module instead.");t.fromString=u},356:(e,t,n)=>{const{uuid:r}=n(281),o=n(471);e.exports=class{constructor(){this.data=new o([])}async getPersons(){return new Promise(((e,t)=>e(this.data.getData())))}async udpatePerson(e,t){return new Promise(((n,r)=>n(this.data.updateData(e,t))))}async getPersonsById(e){return new Promise(((t,n)=>t(this.data.getDataById(e))))}async createPerson(e){return new Promise(((t,n)=>{let o={id:r(),...e};this.data.setData(o),t(o)}))}async deletePerson(e){return new Promise(((t,n)=>{t(this.data.deleteData(e))}))}}},471:e=>{let t=[];e.exports=class{setData(e){t.push(e)}getData(){return t}getDataById(e){return t.find((t=>t.id===e))}deleteData(e){const n=t;return n.filter((t=>t.id===e)),t=n,n}updateData(e,n){const r=t.map((t=>t.id===n?JSON.parse(e):t));return t=r,e}}},555:e=>{e.exports={getReqData:function(e){return new Promise(((t,n)=>{try{let n="";e.on("data",(e=>{n+=e.toString()})),e.on("end",(()=>{t(n)}))}catch(e){n(e)}}))},checkId:function(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)},checkData:function(e){const t=JSON.parse(e);return t.hasOwnProperty("name")&&t.hasOwnProperty("age")&&t.hasOwnProperty("hobbies")}}},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},837:e=>{"use strict";e.exports=require("util")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(738).config();const e=n(685),t=n(356),{getReqData:r,checkId:o,checkData:s}=n(555);e.createServer((async(e,n)=>{if("/person"===e.url&&"GET"===e.method){const e=await(new t).getPersons();n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))}else if(e.url.includes("/person/")&&"DELETE"===e.method){const r=e.url,s=r.id=r.split("/")[2];o(s)&&s||(n.writeHead(400),n.end("Id not valid")),await(new t).deletePerson(s)||(n.writeHead(404),n.end("Id not found")),n.writeHead(200,{"Content-Type":"application/json"}),n.end("Person was deleted")}else if(e.url.includes("/person/")&&"PUT"===e.method){let s=await r(e);const a=e.url,i=a.id=a.split("/")[2];o(i)&&i||(n.writeHead(400),n.end("Id not valid"));let d=await(new t).udpatePerson(s,i);d||(n.writeHead(404),n.end("Id not found")),n.writeHead(200,{"Content-Type":"application/json"}),n.end(d)}else if(e.url.includes("/person/")&&"GET"===e.method){const r=e.url,s=r.id=r.split("/")[2];o(s)&&s||(n.writeHead(400),n.end("Id not valid"));let a=await(new t).getPersonsById(s);a||(n.writeHead(404),n.end("Id not found")),n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(a))}else if("/person"===e.url&&"POST"===e.method){let o=await r(e);s(o)||(n.writeHead(400),n.end("Not valid object"));let a=await(new t).createPerson(JSON.parse(o));n.writeHead(201,{"Content-Type":"application/json"}),n.end(JSON.stringify(a))}else n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Route not found"}))})).listen(PORT=process.env.PORT,(()=>{console.log(`server started on port: ${PORT}`)}))})()})();